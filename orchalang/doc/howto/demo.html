<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Demo</title>
</head>
<body>

<h1>Requirements</h1>

Check if Java (1.8 or higher) is present on your machine:
<ul>
<li>Open a terminal</li>
<li>Type: java -version</li>
<li>In Java is not installed: <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">download page</a></li>
</ul>


<h1>Building the project</h1>

<ul>
<li>Unzip the project</li>
<li>Open a terminal in the main directory of the project</li>
</ul>

<img alt="Main project directory" src="http://www.essai.com/howto/img/mainProjectFolder.PNG">

<ul>
<li>Build the project unsing the command line: gradlew build</li>
</ul>

<h1>Using smart contracts</h1>

<h2>Order preparation</h2>

<ul>
<li><a href="https://gitlab.com/BenOrcha/orcha/blob/cicd/src/main/orcha/source/prepareOrder/PrepareOrder.groovy">The contract written in Orcha</a></li>
<li><a href="https://gitlab.com/BenOrcha/orcha/tree/cicd/src/main/orcha/service/prepareOrder">The services called by the contract written in Groovy with the data structure</a></li>
<li><a href="https://gitlab.com/BenOrcha/orcha/blob/cicd/src/main/orcha/configuration/prepareOrder/PrepareOrderConfiguration.groovy">The configuration of the smart contract</a></li>
<li>The input data of the smart contract (file orderToPrepare.json) is into data\input. <a href="https://gitlab.com/BenOrcha/orcha/blob/cicd/data/input/orderToPrepare.json">A copy of the input data of the smart contract</a></li>
</ul>

<ul>
<li>Compiling the smart contract using the command line: gradlew compileOrcha -PorchaFile="['prepareOrder/PrepareOrder.groovy']"</li>
<li>The generated file (Spring Integration) "prepare order.xml" is into src\main\resources. <a href="https://gitlab.com/BenOrcha/orcha/blob/cicd/src/main/resources/prepare%20order.xml">A copy of this file</a></li>
</ul>

<ul>
<li>Launching the smart contract using the command line: gradlew launchOrcha</li>
<li>Type Ctrl-C to stop the contract</li>
<li>The result file (Spring Integration) "preparedOrder.json" is into data\output. <a href="https://gitlab.com/BenOrcha/orcha/blob/cicd/data/output/preparedOrder.json">A copy of this file</a></li>
</ul>

<h2>Billing</h2>

Billing uses the output of the order preparation to generate a bill.

<ul>
<li><a href="https://gitlab.com/BenOrcha/orcha/blob/cicd/src/main/orcha/source/billing/Billing.groovy">The contract written in Orcha</a>. Note the condition on the input event.</li>
<li><a href="https://gitlab.com/BenOrcha/orcha/tree/cicd/src/main/orcha/service/billing">The services called by the contract written in Javascript with the data structure</a></li>
<li><a href="https://gitlab.com/BenOrcha/orcha/blob/cicd/src/main/orcha/configuration/billing/BillingConfiguration.groovy">The configuration of the smart contract</a></li>
</ul>

<ul>
<li>Compiling the smart contract using the command line: gradlew compileOrcha -PorchaFile="['billing/Billing.groovy']"</li>
<li>The generated file (Spring Integration) "billing order.xml" is into src\main\resources. <a href="https://gitlab.com/BenOrcha/orcha/blob/cicd/data/output/billing.json">A copy of this file</a></li>
</ul>

<ul>
<li>Launching the smart contract using the command line: gradlew launchOrcha</li>
<li>Type Ctrl-C to stop the contract</li>
<li>The result file (Spring Integration) "billing.json" is into data\output. <a href="https://gitlab.com/BenOrcha/orcha/blob/cicd/data/output/preparedOrder.json">A copy of this file</a></li>
</ul>

<h1>More information about the Orcha language</h1>

<ul>
<li><a href="http://www.essai.com/orchaDetails.htm">Language specifications</a></li>
</ul>

</body>
</html>